Ext.define("Valence.common.util.Format",{singleton:true,durationTextSinceDate:function(p,o,b,c){var l=this,j=o||"Y-m-d-H.i.s.u",e=Ext.Date.parse(p,j),d=new Date(),g=60,i=3600,m=86400,k=31536000,n=Math.abs((e.getTime()-d.getTime())/1000),h,a,q;if(Ext.isEmpty(e)||Ext.util.Format.date(e,"Y")==="0001"){return""}if(Ext.isEmpty(b)){if(n<g){return Valence.lang.lit.secondsAgo}else{if(n<i){h=l.getDurationText(Valence.lang.lit.minutesAgo,n,g)}else{if(n<m){h=l.getDurationText(Valence.lang.lit.hoursAgo,n,i)}else{if(n>k){h=l.getDurationText(Valence.lang.lit.yearsAgo,n,k)}else{h=l.getDurationText(Valence.lang.lit.daysAgo,n,m)}}}}}else{if(b=="minute"){a=g}else{if(b=="hour"){a=i}else{if(b=="day"){a=m}else{if(b=="year"){a=k}}}}h=l.getDurationText(c?"{0}":"{0} "+b+"{1} ago",n,a,c)}return Ext.util.Format.format('<span data-qtip="{0}">{1}</span>',Ext.util.Format.date(e,o),h)},getDurationText:function(b,j,a,c){var d=Math.floor(j/a),e=60,f=3600,h=86400,g=31536000,k=Valence.lang.lit,i=d>1?"s":"",l=[b,d];if(d===1){if(a===e){return k.minuteAgo}else{if(a===f){return k.hourAgo}else{if(a===h){return k.dayAgo}else{if(a===g){return k.yearAgo}}}}}if(b.indexOf("VAR1")!==-1){return b.replace("VAR1",d)}if(c){l.push(i)}return l},phone:function(a){if(Ext.isEmpty(a)){return""}if(Ext.isNumber(a)){a+=""}a=a.trim();if(a.length===10){return a.replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3")}else{if(a.length===11){if(a[10]!=0){return a.replace(/(\d{3})(\d{3})(\d{4})(\d{1})/,"$1-$2-$3-$4")}else{return a.substring(0,10).replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3")}}else{if(a.length===1){return""}}}return a},ssn:function(a){if(Ext.isNumber(a)){a+=""}a=a.trim();if(a.length===9){return a.replace(/(\d{3})(\d{2})(\d{4})/,"$1-$2-$3")}return a},ssnmask:function(a){if(Ext.isNumber(a)){a+=""}a=a.trim();if(a.length===9){return a.replace(/(\d{3})(\d{2})(\d{4})/,"XXX-XX-$3")}return a},zip:function(a){if(Ext.isNumber(a)){a+=""}if(a.trim().length===9){return a.replace(/(\d{5})(\d{4})/,"$1-$2")}return a}});Ext.define("Valence.common.widget.Background",{extend:"Ext.Component",xtype:"widget_background",cls:"w-bg"});Ext.define("Valence.common.widget.Loadmask",{extend:"Ext.Component",xtype:"widget_loadmask",cls:"w-mask-outer",type:"spinner",stopDestory:true,tpl:new Ext.XTemplate('<div class="w-mask-inner rect">','<div class="rect1"></div>','<div class="rect2"></div>','<div class="rect3"></div>','<div class="rect4"></div>','<div class="rect5"></div>','<p class="w-mask-title">{text}</p>',"</div>")});Ext.define("Valence.common.util.Helper",{singleton:true,requires:["Ext.util.MixedCollection","Ext.XTemplate","Valence.common.widget.Background","Valence.common.widget.Loadmask"],loadMaskMC:Ext.create("Ext.util.MixedCollection"),buildEmptyText:function(a){var d=this,c="",b;if(Ext.isEmpty(a.heading)){a.heading=Valence.lang.lit.noResults}if(Ext.isEmpty(a.events)){a.events=[]}if(!Ext.isEmpty(a.hideImage)&&a.hideImage){c="display:none;"}if(Ext.isEmpty(a.iconCls)){a.iconCls="vvicon-cloud"}b=new Ext.XTemplate('<div class="vv-empty-text-wrap">','<div class="vv-empty-text-cnt">','<div style="'+c+'"><span class="vvicon {iconCls}"></div>','<div class="vv-empty-text">',"{heading}","</div>",'<tpl if="subText">','<div class="vv-empty-subtext">','<tpl if="events.length == 0">',"{subText}","<tpl else>","{[this.buildSubText(values)]}","</tpl>","</div>","</tpl>","</div>","</div>",{buildSubText:function(j){var e=[j.subText],g=j.events,h;for(var f=0;f<g.length;f++){h=g[f];e.push(Ext.util.Format.format('<span data-event="{0}" class="vv-empty-text-event">{1}</span>',h.event,h.text))}return Ext.bind(Ext.util.Format.format,null,e)()}});return b.applyTemplate(a)},destroyInitialLoadingMask:function(){var a=this,b=Ext.fly("spinner");if(!Ext.isEmpty(b)){b.fadeOut({callback:function(){b.destroy()}})}},destroyLoadMask:function(d){var c=this,b=d||Ext.getBody(),a=c.loadMaskMC.get(b.id);if(a){if(Ext.isClassic){a.el.fadeOut({callback:function(){c.loadMaskMC.remove(a);a.destroy()}})}else{a.element.hide();setTimeout(function(){c.loadMaskMC.remove(a);a.destroy()},300)}}},download:function(c){var b="/valence/vvcall.pgm",a=localStorage.getItem("sid"),d;if(!Ext.isEmpty(c.url)){b=c.url}if(!Ext.isEmpty(c.sid)){a=c.sid}if(Ext.isEmpty(c.omitPortalCredentials)){d=b+"?sid="+a+"&app="+Ext.getUrlParam("app")}else{d=b+"?vv=true"}Ext.iterate(c,function(e,f){d+="&"+e+"="+encodeURI(f)});Ext.core.DomHelper.append(document.body,{tag:"iframe",frameBorder:0,width:0,height:0,css:"display:none;visibility:hidden;height:1px;",src:d})},formatErrorMessage:function(b){var c="",a="";if(!Ext.isEmpty(b.MSG)){c=Valence.lang.lit[b.MSG];if(Ext.isEmpty(c)){return b.MSG}if(c.indexOf("VAR1")!==-1){a=b.VAR1;a=Ext.isEmpty(a)?"":a;c=c.replace("VAR1",a)}if(c.indexOf("VAR2")!==-1){a=b.VAR2;a=Ext.isEmpty(a)?"":a;c=c.replace("VAR2",a)}if(c.indexOf("VAR3")!==-1){a=b.VAR3;a=Ext.isEmpty(a)?"":a;c=c.replace("VAR3",a)}}return c},getDynamicFieldWidth:function(a,i,c,f){var g=this,m=function(){var n=i.measurer,o;if(Ext.isEmpty(n)){o=i.el.createChild();o.addCls("x-form-field x-form-text x-form-text-default").applyStyles({display:"none"});i.measurer=n=new Ext.util.TextMetrics(o);i.on({scope:g,beforedestroy:function(p){if(!Ext.isEmpty(p.measurer)){p.measurer.destroy();p.measurer=null}if(!Ext.isEmpty(p.labelMeasurer)){p.labelMeasurer.destroy();p.labelMeasurer=null}}})}return n},d=function(){var n=i.labelMeasurer,o;if(Ext.isEmpty(n)){o=i.el.createChild();o.addCls("x-form-item-label-inner-default").applyStyles({display:"none"});i.labelMeasurer=n=new Ext.util.TextMetrics(o)}return n},b,l,e;if(Ext.isEmpty(f)){f=false}else{if(f){l=a.FLD+" - "+a.TXT}}if(Ext.isEmpty(l)){if(c){l=a.FLD}else{l=a.TXT}}if(Ext.isEmpty(c)){c=false}if(a.LEN>=750){b=750}else{var k=(a.TYPE==="Numeric"||a.TYPE==="N")?8:"w",j=new Array(a.LEN+1),h=j.join(k);if(a.TYPE==="Date"||a.TYPE==="L"){b=80}else{b=m().getWidth(h);if(b>750){b=750}}}e=d().getWidth(l)+10;return{width:(b>=e)?b:e,labelWidth:e,inputWidth:(b<e)?b+20:b}},getLit:function(d){var b=Ext.isObject(d),a=!b?d:d.lit,c;if(a){c=Valence.lang.lit[a];if(c&&b&&d.var1){c=c.replace("VAR1",Valence.util.Helper.decodeUTF16(d.var1+""))}if(c&&b&&d.var2){c=c.replace("VAR2",Valence.util.Helper.decodeUTF16(d.var2+""))}if(c&&b&&d.var3){c=c.replace("VAR3",Valence.util.Helper.decodeUTF16(d.var3+""))}}else{if(!Ext.isEmpty(d.msg)){c=d.msg}else{if(!Ext.isEmpty(d.MSG)){c=d.MSG}}}return c},loadMask:function(g){var d=this,e=Ext.isObject(g)?g:{text:g},f=e.text,b=e.type||"rect",a=e.renderTo||Ext.getBody(),c;if(Ext.isEmpty(d.loadMaskMC.get(a.id))){if(Ext.isClassic){c=Ext.create("Valence.common.widget.Loadmask",{text:f||"&nbsp;",renderTo:a,type:b})}else{c=Ext.create("Valence.common.widget.Loadmask",{data:{text:f||"&nbsp;"},renderTo:a,type:b})}d.loadMaskMC.add(a.id,c)}},showBgTransition:function(g){var c=this,d=g||{},h=d.position||[1,1],a=d.style||{},f=(Ext.getBody().getWidth()/20)+50,e="scale("+f+")",b;b=Ext.widget("widget_background",{renderTo:Ext.getBody()});b.el.setStyle(Ext.apply(a,{transform:e,"-webkit-transform":e,"-ms-transform":e}));b.showAt(h);return b},uppercaseFirstCharOnly:function(a){if(!Ext.isEmpty(a)){return a.substring(0,1).toUpperCase()+a.substring(1).toLowerCase()}return""}});Ext.define("Valence.common.util.Snackbar",{singleton:true,config:{cmp:null,queue:[],active:false,anchor:null},buildComponent:function(){var a=this;return Ext.create("Ext.Component",{cls:Ext.Classic?"w-snackbar-outer":"w-snackbar-outer w-snackbar-full",renderTo:Ext.getBody(),tpl:['<div class="w-snackbar-text">',"<span>{text}</span>",'<tpl if="buttonText">','<span class="w-snackbar-btn">{[fm.uppercase(values.buttonText)]}</span>',"</tpl>","</div>"],listeners:{scope:a,render:a.onRenderCmp}})},onClickButton:function(){var a=this,b=a.getActive();if(b&&typeof b.handler==="function"){Ext.callback(b.handler,b.scope||a);a.processHide()}},onDestroyCmp:function(b){var a=this;b.el.un("click",a.onClickButton,a)},onRenderCmp:function(b){var a=this;b.el.on({scope:a,delegate:"span.w-snackbar-btn",click:a.onClickButton,destroy:a.onDestroyCmp})},processHide:function(){var d=this,c=d.getCmp(),e=d.getActive(),b=e.push||false,a=d.getQueue();d.setActive(false);c.el.removeCls("is-active");if(b||!Ext.isClassic){Ext.getBody().down("div").removeCls("is-active")}if(a&&a.length>0){setTimeout(function(){d.show(a[0],true)},300)}},show:function(f,a){var d=this,e=Ext.isObject(f)?f:{text:f,duration:4000},b=e.push||false,c;if(!d.getActive()){if(Ext.isClassic){d.setActive(e)}c=d.getCmp();if(!c){c=d.buildComponent();d.setCmp(c)}if(Ext.isClassic){c.update(e)}else{c.setData(e);d.setActive(e)}if(b){Ext.getBody().down("div").addCls("w-snackbar-push is-active");c.el.addCls("w-snackbar-full");if(Ext.isClassic){if(d.getAnchor()!=="tl-bl"){c.el.anchorTo(Ext.getBody(),"tl-bl");d.setAnchor("tl-bl")}}else{c.el.alignTo(Ext.getBody(),"tl-bl")}}else{c.el.removeCls("w-snackbar-full");if(Ext.isClassic){if(d.getAnchor()!=="t-b"){c.el.anchorTo(Ext.getBody(),"t-b");d.setAnchor("t-b")}}else{c.el.alignTo(Ext.getBody(),"t-b")}}c.show().el.addCls("is-active");setTimeout(function(){d.processHide()},e.duration||4000);if(a){Ext.Array.removeAt(d.getQueue(),0)}}else{d.getQueue()?d.getQueue().push(e):d.setQueue([e])}}});Ext.define("Valence.common.grid.plugin.PagingToolbar",{extend:"Ext.grid.plugin.PagingToolbar",alias:"plugin.gridremotepagingtoolbar",updateGrid:function(b,d){var c=this;c.callParent(arguments);c.unbindHook(b,"onScrollBinder","checkPageChange");if(!Ext.isEmpty(d)){var e=d.getStore();if(!Ext.isEmpty(a)){a.un({load:"onStoreLoad",scope:c})}}if(!Ext.isEmpty(b)){var a=b.getStore();if(!Ext.isEmpty(a)){a.on({scope:c,load:"onStoreLoad"})}}},onStoreLoad:function(){var d=this,b=d.getGrid().getStore(),a=b.getPageSize(),c=Math.ceil(b.getTotalCount()/a);d.setTotalPages(c);d.setPageSize(a);d.setCurrentPage(b.currentPage);d.updateTotalPages(c)},onUpdateVisibleCount:function(a){return},onNextPageTap:function(){var e=this,c=e.getGrid(),b=c.getStore(),d=b.currentPage;if(d*b.getPageSize()<b.getTotalCount()){var a=e.getPageTopRecord(d);if(c&&!e.preventGridScroll&&a){c.scrollToRecord(a)}var f=b.currentPage+1;this.setCurrentPage(f)}},onPreviousPageTap:function(){var e=this,c=e.getGrid(),b=e.getGrid().getStore(),d=b.currentPage;if(d>1){var a=e.getPageTopRecord(d);if(c&&!e.preventGridScroll&&a){c.scrollToRecord(a)}var f=b.currentPage-1;e.setCurrentPage(f)}},onPageChange:function(d,c){var b=this,a=b.getGrid();a.getStore().loadPage(c,{scope:b,callback:function(f){var e=(!Ext.isEmpty(f))?f[0]:null;if(!Ext.isEmpty(e)){a.scrollToRecord(e)}b.setCurrentPage(c)}})},updatePageButtons:function(){},onTotalCountChange:function(a){this.setTotalCount(a.getCount())},updateTotalPages:function(b){var a=this;a.getToolbar();a.totalPages.setData({totalPages:b});a.pageSlider.setMaxValue(b||1);a.updatePageInfo(a.getCurrentPage())},updateCurrentPage:function(a){this.updatePageInfo(a)},updateTotalCount:function(a){var b;if(a!==null&&a!==undefined){if(a===0){b=1}else{b=Math.ceil(a/this.getPageSize())}this.setTotalPages(b)}}});Ext.define("Valence.common.util.Dialog",{singleton:true,requires:["Ext.Sheet"],config:{fnc:null,cmp:null,scope:null,waitToClose:null},show:function(c){var i=this,e=c.msg||null,j=c.buttons||null,m=c.title||null,a=c.cfg||null,h=c.handler||null,b=c.minWidth||null,d=c.buttonAlign||"center",g={ui:"dialog",minWidth:b,maxWidth:500,title:m,autoDestroy:true},f,l,k;if(!j){Ext.log("An array of buttons must be passed")}else{if(a){Ext.apply(g,a)}for(var n=0;n<j.length;n++){j[n].scope=i;j[n].handler=i.onClickButton}if(j[0]!="->"&&d=="right"){j.splice(0,0,"->")}}if(!Ext.isEmpty(c.waitToClose)){i.setWaitToClose(c.waitToClose)}f=[{xtype:"component",html:e}];if(!Ext.isEmpty(g.items)){f=Ext.Array.merge(f,g.items)}f.push({xtype:"toolbar",itemId:"btmtlbr",docked:"bottom",items:j});g.items=f;i.setFnc(h);k=Ext.Viewport.add(Ext.widget("sheet",g));i.setCmp(k);return k},onClickButton:function(a){var d=this,g=d.getFnc(),b=d.getScope(),e=d.getWaitToClose(),c=d.getCmp(),f;if(!e){c.setHidden(true)}if(g){f=Ext.callback(g,b,[a.parmText||Ext.util.Format.lowercase(a.getText()),a]);if(e){if(Ext.isEmpty(f)||f){c.setHidden(true);d.setFnc(null);d.setScope(this)}return}d.setFnc(null);d.setScope(this);c.destroy()}}});Ext.define("Valence.common.util.PickerList",{singleton:true,requires:["Ext.Sheet"],config:{cmp:null,scope:this,fnc:null,displayField:null,listArray:[],subMenu:false,cardIndex:0,subLists:null},showPickerList:function(p){var v=this,d=p.listArray||null,w=p.title||null,f=p.cfg||null,t=p.handler||null,l=p.minWidth||null,q=p.maxHeight||null,r=p.displayField||"field1",c=p.textAlign||"center",a=p.scope,k=p.subLists,e={layout:{type:"vbox",align:"stretch"},width:"80%",height:"80%",modal:true,hideOnMaskTap:true,scrollable:true,ui:"dialog",cls:"vv-pickerlist",hideAnimation:{type:"fadeOut",duration:250},minWidth:l,maxWidth:500,maxHeight:q,title:w},b={xtype:"toolbar",docked:"bottom",itemId:"cncltlbr",layout:{type:"hbox",align:"stretch",pack:"center"},height:60,items:[{text:"Cancel",cls:"vv-btn-non-primary",handler:v.onTapCancel,scope:v}]},n,u,j,m,h,g;v.setDisplayField(r);if(!d){Ext.log("An array of options or store must be passed")}else{if(Ext.isEmpty(a)){Ext.log("Scope must be passed.")}else{if(f){Ext.apply(e,f)}u={xtype:"list",width:"100%",selectedCls:"dummy",flex:1,itemTpl:['<div style="display:inline-block;text-align:left;width:90%;overflow-x:hidden;text-overflow:ellipsis;" class="vv-picker-list-item">{'+r+"}</div>",'<tpl if="menu">','<div style="position:absolute;right:0;display:inline-block;"><span style="font-size: 30px;" class="vvicon-arrow-right4"></span></div>',"</tpl>"],store:d,listeners:{itemtap:v.onTapList,scope:v}};n=[u];e.items=n;if(!Ext.isEmpty(k)){m=[];v.setSubMenu(true);v.setCardIndex(0);for(var s=0;s<k.length;s++){j=Ext.clone(u);h=k[s];Ext.apply(j,{itemTpl:['<div style="display:inline-block;text-align:left;width:90%;overflow-x:hidden;text-overflow:ellipsis;" class="vv-picker-list-item">{'+r+"}</div>",'<tpl if="menu">','<div style="position:absolute;right:0;display:inline-block;"><span style="font-size: 30px;" class="vvicon-arrow-right4"></span></div>',"</tpl>"],store:h.store});m.push(j)}v.setSubLists(m);e.items=[{xtype:"toolbar",itemId:"toptlbr",cls:"vv-sublistpicker",docked:"top",height:60,hidden:true,items:[{text:"Back",cls:"vv-btn-non-primary",handler:v.onTapBack,scope:v}]},{xtype:"container",flex:1,layout:{type:"card",animation:"slide"},itemId:"pickernavcnt",items:n},b]}else{v.setSubMenu(false);n.push(b)}if(Ext.isEmpty(e.maxHeight)){if((Ext.isArray(d)&&d.length<5)||(!Ext.isString(d)&&Ext.getStore(d).getCount()<5)&&Ext.isEmpty(k)){e.maxHeight=240}else{e.maxHeight="80%"}}}}v.setFnc(t);v.setScope(a);g=Ext.Viewport.add(Ext.widget("sheet",e));v.setCmp(g);return g},onTapList:function(i,g,b,e){var k=this,h=k.getFnc(),m=k.getScope(),j=k.getSubLists(),f=k.getCmp(),l,d,a,c;if(k.getSubMenu()&&e.get("menu")){c=f.down("#pickernavcnt");d=c.getLayout().getAnimation();d.setDirection("left");a=k.getCardIndex()+1;f.down("#toptlbr").show();l=c.add(j[a-1]);k.setCardIndex(a);c.setActiveItem(l);return}if(k.getSubMenu()){f.down("#toptlbr").destroy()}f.down("#cncltlbr").destroy();f.destroy();if(h){Ext.callback(h,m,[i,k.getDisplayField()==="field1"?e.get("field1"):e]);k.setFnc(null);k.setScope(this)}},onTapBack:function(){var c=this,b=c.getCmp(),a=b.down("#pickernavcnt"),e=a.getLayout().getAnimation(),d=c.getCardIndex()-1,f=a.getActiveItem();e.setDirection("right");c.setCardIndex(d);a.setActiveItem(d);if(d==0){b.down("#toptlbr").hide()}setTimeout(function(){f.destroy()},300)},onTapCancel:function(){var a=this;a.getCmp().destroy()}});Ext.define("Valence.common.widget.Appbar",{extend:"Ext.Toolbar",xtype:"widget_appbar",cls:"x-toolbar-appbar",config:{fireFilterEvtOnly:false,inSearchMode:false,searchComponent:null},bind:{inSearchMode:"{appBarMblSearch}",fireFilterEvtOnly:"{appBarFireFilterEvtOnly}",searchComponent:"{appBarSearchCmp}",ui:"{appBarUI}"},initialize:function(){var a=this;a.callParent(arguments);a.add({xtype:"button",bind:{text:"{appBarTitleText}",iconAlign:"{appBarTitleIconAlign}",iconCls:"{appBarTitleIconCls}",hidden:"{appBarMblSearch}"},cls:Ext.os.is.Phone?"appbar-title appbar-title-phone":"appbar-title",event:"titletap",listeners:{scope:a,tap:a.onTapCmp}});a.add("->");a.add({xtype:"textfield",cls:"vv-appbar-filter-modern",reference:"filterfield",listeners:{change:a.onChangeFilter,scope:a},bind:{value:"{appBarMblSearchValue}",cls:"{appBarMblSearchCls}"}});a.add({xtype:"button",cls:"vv-appbar-filter-btn-modern",width:40,event:"filtertap",bind:{iconCls:"{appBarMblSearchIconCls}",hidden:"{appBarMblSearchIcon}"},listeners:{tap:a.onTapCmp,scope:a}})},getSearchComponent:function(){var a=this,b=a.callParent(arguments);if(!Ext.isEmpty(b)){if(!Ext.isArray(b)){return[b]}}return b},onChangeFilter:function(a,c){var b=this;b.fireEvent("filterchange",a,c);if(!Ext.isEmpty(b.getSearchComponent())){b.performSearch(c)}},onTapCmp:function(d,c){var b=this,a=d.event;if(a){b.fireEvent(a,d)}},buildFilterCtrl:function(){return new Ext.XTemplate('<tpl for="cmp">','<div class="filter-cont">','<div class="filter-text">{.}</div>',"</div>","</tpl>")},performSearch:function(h,b){var f=this,e=f.getSearchComponent(),g,a;if(Ext.isEmpty(b)){b=0}e=e[b];if(Ext.isString(e)){a=Ext.ComponentQuery.query("app-main")[0];e=a.lookupReference(e)}g=Ext.isFunction(e.getStore)?e.getStore():null;if(Ext.isFunction(e.filterBy)){g=e}if(!g){Ext.log({msg:"Appbar search component does not have a getStore method"});return}var d=new RegExp(h,"i"),c=e.appBarSearchFields;if(!c){c=g.getModel().getFields().map(function(i){return i.name})}if(!f.getFireFilterEvtOnly()){g.clearFilter();g.filterBy(function(k){for(var j=0;j<c.length;j++){if(d.test(k.get(c[j]))){return true}}return false})}}});Ext.define("Valence.common.widget.FloatingActionButton",{extend:"Ext.Button",xtype:"widget_floatingactionbutton",iconCls:"vvicon-plus2",cls:"x-btn-floating-action",position:null,positionPrefix:"x-btn-position-",positionOffset:null,floating:true,subAction:false,hide:function(){var a=this;if(!Ext.isEmpty(a.element)){a.element.removeCls("x-btn-scale-in")}a.callParent(arguments)},applyOffsets:function(){var i=this,e=i.positionOffset;if(!Ext.isEmpty(i.position)&&!Ext.isEmpty(e)&&e.length===2){var h=i.positionPrefix+i.position,j=Ext.util.CSS.getRule("."+h);if(!Ext.isEmpty(j)){var d=new RegExp(/[a-zA-Z]+/g),f=new RegExp(/\d+/),a=j.style.getPropertyValue("bottom"),c=(!Ext.isEmpty(a))?f.exec(a):null,l=(!Ext.isEmpty(a))?d.exec(a):null,k=j.style.getPropertyValue("right"),g=(!Ext.isEmpty(k))?f.exec(k):null,b=(!Ext.isEmpty(k))?d.exec(k):null;if(!Ext.isEmpty(c)&&!Ext.isEmpty(l)){c=parseInt(c[0])+e[0];i.setStyle("bottom",c+l)}if(!Ext.isEmpty(g)&&!Ext.isEmpty(b)){g=parseInt(g[0])+e[1];i.setStyle("right",g+b)}}}},show:function(){var b=this,a=function(){if(!Ext.isEmpty(b.element)){b.element.addCls("x-btn-scale-in")}};b.callParent(arguments);if(!Ext.isEmpty(b.positionOffset)){b.applyOffsets();b.positionOffset=null;setTimeout(function(){a()},150)}else{if(!Ext.isEmpty(b.element)){a()}}}});Ext.define("Valence.common.widget.MatTabs",{extend:"Ext.tab.Panel",xtype:"widget_mattabs",initialize:function(){var c=this,b=c.getTabBar(),a=b.getScrollable();c.callParent(arguments);c.activeEl=Ext.DomHelper.append(b.el,{tag:"div",cls:"mattabs-active-div"},true);c.on({scope:c,activeitemchange:c.onTabChange});if(a){a.on({scroll:function(){c.onTabChange(c,c.getActiveItem())}})}setTimeout(function(){c.onTabChange(c,c.getActiveItem())},500)},onTabChange:function(e,f){var d=this,b=f.tab,c=b.el.getBox(),a=e.getTabBarPosition();d.activeEl.applyStyles({width:c.width+"px"});if(a==="bottom"){d.activeEl.setXY([c.left,c.top-4])}else{if(a==="top"){d.activeEl.setXY([c.left,c.bottom+2])}}},destroy:function(){var b=this,a=b.activeEl;if(a){a.destroy()}b.callParent(arguments)}});Ext.define("Valence.common.widget.NavContainer",{extend:"Ext.Container",xtype:"widget_navcontainer",layout:{type:"card",animation:"slide"},bind:{activeItem:"{activeItem}"},cls:"vv-navcnt",animateBackToView:function(e,a,c){var d=this,g=d.getActiveItem(),f=d.getLayout().getAnimation(),b=f.getDirection();f.setDirection(Ext.isEmpty(a)?"right":a);d.setActiveItem(Ext.isEmpty(e)?0:e);setTimeout(function(){if(c){g.destroy()}f.setDirection(b)},300)}});Ext.define("Valence.common.widget.NavDrawer",{extend:"Ext.Container",xtype:"widget_navdrawer",config:{open:false,bottom:0,cls:"mainmenu",docked:"left",left:0,top:0,width:266,zIndex:0,layout:"vbox"},setParent:function(a){var b=this;b.callParent(arguments);if(!Ext.isEmpty(a)){b.maskCmp=a.add({xtype:"component",cls:"valence-menu-mask",top:0,zIndex:900,hidden:true,width:9999,left:b.getWidth(),bottom:0});b.maskCmp.element.on({scope:this,touchend:"onMaskRelease"})}},onMaskRelease:function(a){a.preventDefault();this.setOpen(false)},onDestroy:function(){var a=this;a.maskCmp.destroy();delete a.maskCmp;a.callParent(arguments)},toggle:function(){var a=this;a.setOpen(!a.getOpen())},updateOpen:function(d){var e=this,h=e.up(),a=Ext.ComponentQuery.query("#valencemenubutton")[0],g=Ext.ComponentQuery.query("#valenceactionmenubutton")[0],c=(!Ext.isEmpty(a))?a:g,b,i,f;if(!h){return}i=Ext.Viewport.innerElement;f=Ext.get(i);if(!Ext.isEmpty(c)){b=c.element.down(".x-button-icon")}if(d){f.setLeft(e.getWidth()+"px");if(!Ext.isEmpty(b)){b.addCls("valence-menu-rotate")}setTimeout(function(){e.maskCmp.show();e.fireEvent("show",e)},100)}else{f.setLeft(0+"px");if(!Ext.isEmpty(b)){b.removeCls("valence-menu-rotate")}setTimeout(function(){e.maskCmp.hide();e.fireEvent("hide",e)},0)}}});